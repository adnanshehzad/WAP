<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lab 6</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <h1>Hello JavaScript();</h1>
        <p id="clock"></p>

        <div class="container">
            <form action="" method="GET">
                <fieldset>
                    <div class="form-group">
                        <label for="studentidlabel">Student ID</label>
                        <input type="text" id="studentid" class="form-control" placeholder="000-XX-XXXX" maxlength="11">
                        <small id="u">Your unique Student identification number</small>
                    </div>
                    <div class="form-group">
                        <label for="firstnamelabel">First Name</label>
                        <input type="text" id="firstname" class="form-control" placeholder="e.g John">
                    </div>
                    <button type="submit" id="submittbtn" class="btn btn-primary">Submit</button>
                </fieldset>
            </form>
        </div>
        <br>
        <div class="container">
            <ul id="studentul" class="list-group">
                <li class="list-group-item active">Student Names</li>
            </ul>
        </div>
    </div>
    <script>
        //Setting time Interval for getting date every 1 second
        (function() { //IIFE Pattern

            const p = document.getElementById('clock');
            setInterval(() => {
                p.innerHTML = new Date();
            }, 1000);
            //Loading List
            const listData = [{
                "studentId": "000-98-0001",
                "firstName": "James"
            }, {
                "studentId": "000-98-0002",
                "firstName": "Anna"
            }, {
                "studentId": "000-98-0003",
                "firstName": "Jeffrey"
            }];
            window.addEventListener("load", function() {
                listData.forEach(function(std) {
                    const newelement = document.createElement("li");
                    newelement.className = "list-group-item";
                    newelement.innerHTML = std.studentId + "-" + std.firstName;
                    document.querySelector("#studentul").appendChild(newelement);
                })
            });
            const btnclicked = document.querySelector("#submittbtn");
            btnclicked.addEventListener("click", function(event) {
                const stdid = document.getElementById('studentid');
                const stdname = document.getElementById('firstname');
                console.log("Btn Clicked" + stdid.value + stdname.value);
                if (stdid.value != "" && stdname.value != "") {
                    const newelement = document.createElement("li");
                    newelement.className = "list-group-item";
                    newelement.innerHTML = stdid.value + "-" + stdname.value;
                    document.querySelector("#studentul").appendChild(newelement);
                    stdid.value = "";
                    stdname.value = "";
                    event.preventDefault();
                }
            })
        })();
    </script>
</body>

</html>